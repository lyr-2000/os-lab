---
title: "最终能运行成功的代码"
date: 2022-06-19T18:03:56+08:00
lastmod: 2022-05-11T20:02:48+08:00
categories: ["~/share/helloworld/docs"]
tags: ["~/share/helloworld/docs"]
author: "lyr"
draft: false
images: ["https://api.mtyqx.cn/api/random.php"]

---



## 操作系统真相还原

[参考代码](https://github.com/doctording/os)

后续将会照着这个 操作系统真象还原 这本书继续学习 


# 系统调用

操作系统对用户进程提供服务的接口
* 通过软中断触发中断
* INT和IRET指令用于系统调用，系统调用时，有堆栈切换和特权级的切换

系统调用简单流程
1. 当应用程序调用系统调用时，软中断触发0x80中断（要保护现场：如用户进程的值都保存到寄存器）
2. CPU收到中断信号，从中断向量表中，拿到中断服务例程，得到中断号
3. 通过中断号，从系统调用表中找到系统调用程序（用户无法访问的，内核的某个地址），然后开始执行（内核态就可以随心所欲操作了）
4. 执行完之后，再恢复现场，返回上层应用程序，用户进程接着运行




## 学习路线记录


主要看操作系统真象还原


[最后看这个视频](https://www.bilibili.com/video/BV18K411w7Z2?p=46&vd_source=5680f9cc1e793f7b70191c94d5552ecb)


